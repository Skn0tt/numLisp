import Code from "mdx-code";
import { Notes } from "mdx-deck";
import { Split, FullScreenCode } from "mdx-deck/layouts";
import SyntaxHighlighter from 'react-syntax-highlighter';
export theme from "./theme";

# Building a LISP interpreter

---
export default FullScreenCode;

## What's an interpreter, anyways?

<SyntaxHighlighter language="c">{
`int fib(int n) {
  if (n < 2) {
    return n;
  }
  
  return fib(n - 1) + fib(n - 2);
}`
}</SyntaxHighlighter>

<Notes>
  Interpreting is a way of running code.
  There's "Compilation" and "Interpretation" - when "compiling",
  you take your code and create something machine-readable out of it.
  That's what's run on your computer.
  When "interpreting", you take your code and pass it to
  an "intepreter", which is a program that "interprets" the code
  and will execute it.

  Basically, all code can either be compiled or interpreted.
</Notes>

---
export default Code

```js
function getCharArray(program) {
  return program.split("");
}
```
```javascript Building a Brainfuck-esque interpreter: "-+++-."
function interpret(program) {
  const tokens = getCharArray(program);

  let index = 0;
  let data = 0;

  while (index < tokens.length) {
    const token = tokens[index];

    switch (token) {
      case ".": console.log(data); break;
      case "+": data++; break;
      case "-": data--; break;
      case "[": index += data; continue;
    }

    index++;
  }
}

interpret("-+++-.");
// interpret("++++.+-+-++[+-+------.");
```

---
export default FullScreenCode;

# LISP explained

<SyntaxHighlighter language="lisp">{
`(+ 7 8) // 15
(list 1 2 3) // [1, 2, 3]
(cons 42 (list 1 2 3)) // [42, 1, 2, 3]
(car (list 1 2 3)) // 1
(cdr (list 1 2 3)) // [2, 3] \n
+ variables, functions, ...
`
}</SyntaxHighlighter>

---

# Phases of Interpretation

---
export default FullScreenCode;

# Lexing

<SyntaxHighlighter language="text">{
`(+ 10 (car (list 32 33 34)))
  => [
        "(", "+", "10", "(",
        "car", "(", "list", "1",
        "2", "3", ")", ")", ")"
     ]
`
}</SyntaxHighlighter>

---

# Parsing

[![](https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcblxuXHQrIC0tPiAxMFxuICAgICsgLS0-IGNhclxuICAgIGNhciAtLT4gbGlzdFxuICAgIGxpc3QgLS0-IDMyXG4gICAgbGlzdCAtLT4gMzNcbiAgICBsaXN0IC0tPiAzNFxuXHRcdFx0XHRcdCIsIm1lcm1haWQiOnsidGhlbWUiOiJuZXV0cmFsIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcblxuXHQrIC0tPiAxMFxuICAgICsgLS0-IGNhclxuICAgIGNhciAtLT4gbGlzdFxuICAgIGxpc3QgLS0-IDMyXG4gICAgbGlzdCAtLT4gMzNcbiAgICBsaXN0IC0tPiAzNFxuXHRcdFx0XHRcdCIsIm1lcm1haWQiOnsidGhlbWUiOiJuZXV0cmFsIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

---
export default FullScreenCode;

# Executing

<SyntaxHighlighter language="text">{
`[ "+",
    "10",
    [ "car",
      [ "list",
        "32", "33", "34" ]
    ]
]
  => 42
`
}</SyntaxHighlighter>

---

export default Code

```javascript A playground slide!
console.log("Hello World!");
```